<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Photon Bot</title>
  </head>
  <body>
    <h1>Photon Bot</h1>
    <input id="appId"  placeholder="App ID"      value="12166b2c-34e5-4b6e-8ae9-2cc5217f87cc">
    <input id="appVer" placeholder="App Version" value="1.0">
    <input id="region" placeholder="Region"      value="us">
    <input id="roomName" placeholder="Room Name" value="1">
    <button id="connect">Connect &amp; Join Room</button>
    <pre id="log"></pre>

    <script src="https://cdn.jsdelivr.net/npm/photon-javascript-sdk@1.0.0/lib/Photon-Javascript_SDK.min.js"></script>
    <script>
      function log(...args) {
        document.getElementById('log').textContent += args.join(' ') + '\\n';
      }

      document.getElementById('connect').addEventListener('click', () => {
        const appId   = document.getElementById('appId').value.trim();
        const appVer  = document.getElementById('appVer').value.trim() || '1.0';
        const region  = document.getElementById('region').value.trim() || 'us';
        const room    = document.getElementById('roomName').value.trim() || '1';
        log('Connecting…', '\\nApp ID:', appId, '\\nApp Version:', appVer, '\\nRegion:', region, '\\nRoom Name:', room);

        const { LoadBalancingClient, ConnectionProtocol, StatusCode } = Photon.LoadBalancing;
        const client = new LoadBalancingClient(appId, appVer, ConnectionProtocol.Ws);

        client.onStateChange = state => {
          log('Client state changed:', LoadBalancingClient.StateToName(state));
          if (state === StatusCode.Connect) {
            log('Connected to region master. Joining room…');
            client.joinOrCreateRoom(room, { maxPlayers: 4 });
          }
          if (state === StatusCode.Disconnect) {
            log('Disconnected from Photon.');
          }
        };

        client.onJoinRoom = () => {
          log('Joined room', room, 'as actor #', client.myActorNumber);
        };

        client.onError = (code, msg) => {
          log('Photon error:', code, msg);
        };

        client.connectToRegionMaster(region);
        setInterval(() => client.service(), 100);
      });
    </script>
  </body>
</html>
